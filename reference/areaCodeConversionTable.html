<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Area code conversion table — areaCodeConversionTable • RstoxFDA</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Area code conversion table — areaCodeConversionTable"><meta property="og:description" content="Make conversion table from area code-definitions.
Conversion tables are constructed based on geometric principles (based on centroid positions, or overlap).
Whether this produces a complete and correct mapping between area codes depends on their shape and size.
For instance, the centroid may be outside an area for odd shapes, areas in different definitions may be partly overlapping,
and areas of one definition may subdivide those of another definition.
This is best evaluated by visual inspection of the area definitions.
The conversion table can be constructed with the following methods (argument: 'method'):
overlap
Each area in areaDef1 is mapped to the area in areaDef2 with the largest overlap.

centroids
Eac area in areaDef1 is mapped to the area in areaDef2 which contains its centroid.


Centroids may be preferred for performance reasons, but depending on the shape of areas,
the centroid may not always be a good representation.
Areas in areaDef1 that has no corresponding area in areaDef2 will be omitted from results."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RstoxFDA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/StoX-data-preparation.html">StoX FDA data preparation (baseline)</a>
    </li>
    <li>
      <a href="../articles/Stox-FDA-overview.html">StoX Fisheries overview (report)</a>
    </li>
    <li>
      <a href="../articles/stox-reca.html">StoX-Reca (analysis)</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/StoXProject/RstoxFDA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Area code conversion table</h1>
    <small class="dont-index">Source: <a href="https://github.com/StoXProject/RstoxFDA/blob/HEAD/R/DataPrep.R" class="external-link"><code>R/DataPrep.R</code></a></small>
    <div class="hidden name"><code>areaCodeConversionTable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Make conversion table from area code-definitions.</p>
<p>Conversion tables are constructed based on geometric principles (based on centroid positions, or overlap).
Whether this produces a complete and correct mapping between area codes depends on their shape and size.
For instance, the centroid may be outside an area for odd shapes, areas in different definitions may be partly overlapping,
and areas of one definition may subdivide those of another definition.
This is best evaluated by visual inspection of the area definitions.</p>
<p>The conversion table can be constructed with the following methods (argument: 'method'):</p><dl><dt>overlap</dt>
<dd><p>Each area in areaDef1 is mapped to the area in areaDef2 with the largest overlap.</p></dd>

<dt>centroids</dt>
<dd><p>Eac area in areaDef1 is mapped to the area in areaDef2 which contains its centroid.</p></dd>


</dl><p>Centroids may be preferred for performance reasons, but depending on the shape of areas,
the centroid may not always be a good representation.</p>
<p>Areas in areaDef1 that has no corresponding area in areaDef2 will be omitted from results.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">areaCodeConversionTable</span><span class="op">(</span></span>
<span>  <span class="va">areaDef1</span>,</span>
<span>  <span class="va">areaDef2</span>,</span>
<span>  areaName1 <span class="op">=</span> <span class="st">"StratumName"</span>,</span>
<span>  areaName2 <span class="op">=</span> <span class="va">areaName1</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overlap"</span>, <span class="st">"centroids"</span><span class="op">)</span>,</span>
<span>  dTolerance <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>areaDef1</dt>
<dd><p><code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygonsDataFrame</a></code> defining area codes</p></dd>


<dt>areaDef2</dt>
<dd><p><code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygonsDataFrame</a></code> defining area codes</p></dd>


<dt>areaName1</dt>
<dd><p>column in areaDef1 identifying the name of areas</p></dd>


<dt>areaName2</dt>
<dd><p>column in areaDef2 identifying the name of areas</p></dd>


<dt>method</dt>
<dd><p>method for mapping area codes. See details.</p></dd>


<dt>dTolerance</dt>
<dd><p>tolerance parameter passed to <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_simplify</a></code> when method is 'overlap'.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a list mapping area codes in areaDef1 to those in areaDef2</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="plotAreaComparison.html">plotAreaComparison</a></code> for visual inspection of how different area definitions correspond.</p>
<p>Other spatial coding functions: 
<code><a href="AddAreaPositionStoxLanding.html">AddAreaPositionStoxLanding</a>()</code>,
<code><a href="AddStratumStoxBiotic.html">AddStratumStoxBiotic</a>()</code>,
<code><a href="AddStratumStoxLanding.html">AddStratumStoxLanding</a>()</code>,
<code><a href="DefineAreaPosition.html">DefineAreaPosition</a>()</code>,
<code><a href="DefineCarNeighbours.html">DefineCarNeighbours</a>()</code>,
<code><a href="LoadFdaStratumPolygon.html">LoadFdaStratumPolygon</a>()</code>,
<code><a href="SetAreaPositionsBiotic.html">SetAreaPositionsBiotic</a>()</code>,
<code><a href="appendAreaCode.html">appendAreaCode</a>()</code>,
<code><a href="appendPosition.html">appendPosition</a>()</code>,
<code><a href="mergePolygons.html">mergePolygons</a>()</code>,
<code><a href="plotAreaComparison.html">plotAreaComparison</a>()</code>,
<code><a href="plotArea.html">plotArea</a>()</code>,
<code><a href="writeSpDataFrameAsWKT.html">writeSpDataFrameAsWKT</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="co"># map fdir areas to ICES areas by overlap</span></span></span>
<span class="r-in"><span> <span class="va">fdir.ICES.map</span> <span class="op">&lt;-</span> <span class="fu">areaCodeConversionTable</span><span class="op">(</span><span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="mainareaFdir2018.html">mainareaFdir2018</a></span>, <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESareas.html">ICESareas</a></span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="co"># map fdir locations to ICES statistical rectangles, by centroids</span></span></span>
<span class="r-in"><span> <span class="va">loc.rectangles.map</span> <span class="op">&lt;-</span> <span class="fu">areaCodeConversionTable</span><span class="op">(</span><span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="locationsFdir2018.html">locationsFdir2018</a></span>, </span></span>
<span class="r-in"><span>        <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESrectangles.html">ICESrectangles</a></span>, method<span class="op">=</span><span class="st">"centroids"</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="co"># map selected statistical rectangles to ICES areas by overlap</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">catchsamples</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">selectedRects</span> <span class="op">&lt;-</span> <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESrectangles.html">ICESrectangles</a></span><span class="op">[</span></span></span>
<span class="r-in"><span>             <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESrectangles.html">ICESrectangles</a></span><span class="op">$</span><span class="va">StratumName</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">catchsamples</span><span class="op">$</span><span class="va">LEstatRect</span>,<span class="op">]</span></span></span>
<span class="r-in"><span> <span class="va">catchsamples</span><span class="op">$</span><span class="va">LEarea</span> <span class="op">&lt;-</span> <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="fu"><a href="convertCodes.html">convertCodes</a></span><span class="op">(</span><span class="va">catchsamples</span><span class="op">$</span><span class="va">LEstatRect</span>, </span></span>
<span class="r-in"><span>             <span class="fu">areaCodeConversionTable</span><span class="op">(</span><span class="va">selectedRects</span>, </span></span>
<span class="r-in"><span>             <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESareas.html">ICESareas</a></span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Arne Johannes Holmin, Edvin Fuglebakk.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

