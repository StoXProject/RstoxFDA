<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Make conversion table from area code-definitions.
Conversion tables are constructed based on geometric principles (based on centroid positions, or overlap).
Whether this produces a complete and correct mapping between area codes depends on their shape and size.
For instance, the centroid may be outside an area for odd shapes, areas in different definitions may be partly overlapping,
and areas of one definition may subdivide those of another definition.
This is best evaluated by visual inspection of the area definitions.
The conversion table can be constructed with the following methods (argument: 'method'):
overlap
Each area in areaDef1 is mapped to the area in areaDef2 with the largest overlap.

centroids
Eac area in areaDef1 is mapped to the area in areaDef2 which contains its centroid.


Centroids may be preferred for performance reasons, but depending on the shape of areas,
the centroid may not always be a good representation.
Areas in areaDef1 that has no corresponding area in areaDef2 will be omitted from results."><title>Make area code conversion table — areaCodeConversionTable • RstoxFDA</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make area code conversion table — areaCodeConversionTable"><meta property="og:description" content="Make conversion table from area code-definitions.
Conversion tables are constructed based on geometric principles (based on centroid positions, or overlap).
Whether this produces a complete and correct mapping between area codes depends on their shape and size.
For instance, the centroid may be outside an area for odd shapes, areas in different definitions may be partly overlapping,
and areas of one definition may subdivide those of another definition.
This is best evaluated by visual inspection of the area definitions.
The conversion table can be constructed with the following methods (argument: 'method'):
overlap
Each area in areaDef1 is mapped to the area in areaDef2 with the largest overlap.

centroids
Eac area in areaDef1 is mapped to the area in areaDef2 which contains its centroid.


Centroids may be preferred for performance reasons, but depending on the shape of areas,
the centroid may not always be a good representation.
Areas in areaDef1 that has no corresponding area in areaDef2 will be omitted from results."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RstoxFDA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0-9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/StoX-data-preparation.html">StoX FDA data preparation (baseline)</a>
    <a class="dropdown-item" href="../articles/Stox-FDA-overview.html">StoX Fisheries overview (report)</a>
    <a class="dropdown-item" href="../articles/stox-reca.html">StoX-Reca (analysis)</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/StoXProject/RstoxFDA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Make area code conversion table</h1>
      <small class="dont-index">Source: <a href="https://github.com/StoXProject/RstoxFDA/blob/HEAD/R/DataPrep.R" class="external-link"><code>R/DataPrep.R</code></a></small>
      <div class="d-none name"><code>areaCodeConversionTable.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Make conversion table from area code-definitions.</p>
<p>Conversion tables are constructed based on geometric principles (based on centroid positions, or overlap).
Whether this produces a complete and correct mapping between area codes depends on their shape and size.
For instance, the centroid may be outside an area for odd shapes, areas in different definitions may be partly overlapping,
and areas of one definition may subdivide those of another definition.
This is best evaluated by visual inspection of the area definitions.</p>
<p>The conversion table can be constructed with the following methods (argument: 'method'):</p><dl><dt>overlap</dt>
<dd><p>Each area in areaDef1 is mapped to the area in areaDef2 with the largest overlap.</p></dd>

<dt>centroids</dt>
<dd><p>Eac area in areaDef1 is mapped to the area in areaDef2 which contains its centroid.</p></dd>


</dl><p>Centroids may be preferred for performance reasons, but depending on the shape of areas,
the centroid may not always be a good representation.</p>
<p>Areas in areaDef1 that has no corresponding area in areaDef2 will be omitted from results.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">areaCodeConversionTable</span><span class="op">(</span></span>
<span>  <span class="va">areaDef1</span>,</span>
<span>  <span class="va">areaDef2</span>,</span>
<span>  areaName1 <span class="op">=</span> <span class="st">"StratumName"</span>,</span>
<span>  areaName2 <span class="op">=</span> <span class="va">areaName1</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"overlap"</span>, <span class="st">"centroids"</span><span class="op">)</span>,</span>
<span>  dTolerance <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>areaDef1</dt>
<dd><p><code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygonsDataFrame</a></code> defining area codes</p></dd>


<dt>areaDef2</dt>
<dd><p><code><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygonsDataFrame</a></code> defining area codes</p></dd>


<dt>areaName1</dt>
<dd><p>column in areaDef1 identifying the name of areas</p></dd>


<dt>areaName2</dt>
<dd><p>column in areaDef2 identifying the name of areas</p></dd>


<dt>method</dt>
<dd><p>method for mapping area codes. See details.</p></dd>


<dt>dTolerance</dt>
<dd><p>tolerance parameter passed to <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_simplify</a></code> when method is 'overlap'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a list mapping area codes in areaDef1 to those in areaDef2</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="plotAreaComparison.html">plotAreaComparison</a></code> for visual inspection of how different area definitions correspond.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="co"># map fdir areas to ICES areas by overlap</span></span></span>
<span class="r-in"><span> <span class="va">fdir.ICES.map</span> <span class="op">&lt;-</span> <span class="fu">areaCodeConversionTable</span><span class="op">(</span><span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="mainareaFdir2018.html">mainareaFdir2018</a></span>, <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESareas.html">ICESareas</a></span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="co"># map fdir locations to ICES statistical rectangles, by centroids</span></span></span>
<span class="r-in"><span> <span class="va">loc.rectangles.map</span> <span class="op">&lt;-</span> <span class="fu">areaCodeConversionTable</span><span class="op">(</span><span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="locationsFdir2018.html">locationsFdir2018</a></span>, </span></span>
<span class="r-in"><span>        <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESrectangles.html">ICESrectangles</a></span>, method<span class="op">=</span><span class="st">"centroids"</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span> <span class="co"># map selected statistical rectangles to ICES areas by overlap</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">catchsamples</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">selectedRects</span> <span class="op">&lt;-</span> <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESrectangles.html">ICESrectangles</a></span><span class="op">[</span></span></span>
<span class="r-in"><span>             <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESrectangles.html">ICESrectangles</a></span><span class="op">$</span><span class="va">StratumName</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">catchsamples</span><span class="op">$</span><span class="va">LEstatRect</span>,<span class="op">]</span></span></span>
<span class="r-in"><span> <span class="va">catchsamples</span><span class="op">$</span><span class="va">LEarea</span> <span class="op">&lt;-</span> <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="fu"><a href="convertCodes.html">convertCodes</a></span><span class="op">(</span><span class="va">catchsamples</span><span class="op">$</span><span class="va">LEstatRect</span>, </span></span>
<span class="r-in"><span>             <span class="fu">areaCodeConversionTable</span><span class="op">(</span><span class="va">selectedRects</span>, </span></span>
<span class="r-in"><span>             <span class="fu">RstoxFDA</span><span class="fu">::</span><span class="va"><a href="ICESareas.html">ICESareas</a></span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Arne Johannes Holmin, Edvin Fuglebakk.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

